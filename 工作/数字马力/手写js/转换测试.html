<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      let treeData = [
        {
          id: 1,
          parentId: null,
          name: "董事会",
        },
        {
          id: 2,
          parentId: null,
          name: "技术部",
          children: [
            {
              id: 21,
              parentId: 2,
              name: "后端技术部",
              children: [
                {
                  id: 211,
                  parentId: 21,
                  name: "java技术",
                },
                {
                  id: 212,
                  parentId: 21,
                  name: "go技术",
                },
              ],
            },
            {
              id: 22,
              parentId: 2,
              name: "前端技术部",
              children: [
                {
                  id: 221,
                  parentId: 22,
                  name: "react.js",
                },
                {
                  id: 222,
                  parentId: 22,
                  name: "vue.js",
                },
              ],
            },
            {
              id: 23,
              parentId: 2,
              name: "运维技术部",
            },
          ],
        },
        {
          id: 3,
          parentId: null,
          name: "产品部",
        },
        {
          id: 4,
          parentId: null,
          name: "公关部",
          children: [
            {
              id: 41,
              parentId: 4,
              name: "女公关部",
            },
            {
              id: 42,
              parentId: 4,
              name: "男公关部",
            },
          ],
        },
      ];
      function tranFunc(arr) {
        let resArr = [];
        /*
          像这种题 真是要隔两天 都需要重新去写一下
          不然思路就堵住了
        */
        return arr?.reduce((prev, cur) => {
          /*
            我开始有判断parentId 这个存在不 傻逼判断也是
          */
          if (!cur?.children) {
            prev.push(cur);
          } else {
            console.log(cur, "存在子节点");
            const childrenList = tranFunc(cur.children);
            if (childrenList) {
              delete cur.children;
              prev.push(cur, ...childrenList);
            }
          }
          return prev;
        }, []);
      }
      const res = tranFunc(treeData);
      console.log(res);
    </script>
  </body>
</html>
